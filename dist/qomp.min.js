(()=>{var d=btoa||(s=>Buffer.from(s).toString("base64")),p=atob||(s=>Buffer.from(s,"base64").toString("utf-8")),g=s=>Promise.resolve().then(s),c=(s,t,e)=>{let o=document.createElement(s);Object.entries(t).forEach(([n,l])=>o.setAttribute(n,l)),e&&o.append(document.createTextNode(e)),document.head.append(o)},m=({link:s,css:t})=>{t.length>0&&c("style",{type:"text/css"},t),s.length>0&&(typeof s=="string"?[s]:s).forEach(o=>c("link",{rel:"stylesheet",href:o}))},r=!1,E=(s,t)=>{let e=Object.assign({elCount:0,importMetaUrl:s,tagName:s.split("/").pop().split(".").shift(),props:{},attr:[],css:()=>"",html:()=>"",update:()=>{},events:()=>[],do:{},style:f,renderClient:h,define:y},t),o=Object.assign((...n)=>u.apply(e,n),e);return qomp.tags.push(o),o};qomp.tags=[];qomp.styleAll=()=>{let s={link:[],css:""};return qomp.tags.forEach(t=>{let e=t.style();e.link&&s.link.push(e.link),e.css&&(s.css+=`
`+e.css)}),s};qomp.defineAll=(s=!0)=>{s&&m(qomp.styleAll()),qomp.tags.forEach(t=>{t.define(!1)})};function f(){let s=this,t={};return s.css===!0?t.link=s.importMetaUrl.replace(".js",".css"):t.css=s.css(s.tagName).trim(),t}function u(s="",t={},e=""){let o=this;return o.elCount++,Array.isArray(e)&&(e=e.join(`
`)),`<${o.tagName} ${s} data-props="${d(JSON.stringify(t))}">  ${o.html({props:t}).replace("<slot></slot>",e)}</${o.tagName}>`}function h(s,t={}){let e=this;e.elCount++;let o=e.html({props:t});if(!o.includes("<slot>")){s.innerHTML=o;return}let n=document.createElement("div");[...s.childNodes].filter(a=>a.textContent.trim()).forEach(a=>n.appendChild(a)),s.innerHTML=o;for(let a of[...n.childNodes]){let i=s.querySelector("slot");i?i.parentNode.replaceChild(a,i):console.warn("Too many child nodes or too few slots in",e.tagName,s.id)}}function y(s=!0){let t=this;r&&t.tagName,s&&m(t.style()),customElements.define(t.tagName,class extends HTMLElement{constructor(){super();let e=this;e.mem={props:Object.assign({},t.props),ready:!1,update(){t.update({el:e,props:e.mem.props,set:(o,n)=>e.querySelector(o).innerHTML=n}),e.dispatchEvent(new CustomEvent("change",{detail:{...e.mem.props}}))},elEvents:[]},e.do={},Object.entries(t.do).forEach(([o,n])=>{e.do[o]=n.bind(e.mem)}),r&&(t.tagName,e.id)}set props(e){let o=this;Object.assign(o.mem.props,e),o.mem.ready&&o.mem.update()}get props(){return{...this.mem.props}}connectedCallback(){let e=this;if(this.mem.ready){r&&(t.tagName,e.id);return}r&&(t.tagName,e.id),g(()=>{e.dataset.props?(Object.assign(e.mem.props,JSON.parse(p(e.dataset.props))),r&&(t.tagName,e.id)):(t.renderClient(e,e.mem.props),r&&(t.tagName,e.id)),r&&(t.tagName,e.id),e.mem.elEvents=t.events({el:e}),e.mem.elEvents.forEach(([n,l,a])=>{e.querySelector(n).addEventListener(l,a)})}),e.mem.ready=!0}disconnectedCallback(){let e=this;if(e.parentElement){r&&(t.tagName,e.id);return}r&&(t.tagName,e.id),r&&(t.tagName,e.id),e.mem.elEvents.forEach(([o,n,l])=>e.querySelector(o).removeEventListener(n,l)),e.mem.elEvents=[]}static get observedAttributes(){return t.attr}attributeChangedCallback(e,o,n){let l=this;l.props={[e]:n}}})}})();
